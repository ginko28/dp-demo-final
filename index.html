<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCI研究实验工具</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 知情同意书页面 -->
    <div id="consent-page" class="consent-page">
        <div class="consent-content">
            <h2>知情同意书</h2>
            <div class="consent-text">
                <p><strong>研究标题：</strong>直播电商界面设计对用户行为影响的研究</p>
                
                <p><strong>研究目的：</strong>本研究旨在了解直播电商界面中不同设计元素对用户行为决策的影响，以优化用户体验和界面设计。</p>
                
                <p><strong>参与内容：</strong>您将观看一系列直播电商界面设计，并回答相关的问卷问题。整个过程大约需要10分钟。</p>
                
                <p><strong>隐私保护：</strong></p>
                <ul>
                    <li>您的个人信息将被严格保密</li>
                    <li>收集的数据仅用于学术研究目的</li>
                    <li>不会收集任何能够识别您身份的个人信息</li>
                    <li>研究结果将以匿名形式发表</li>
                </ul>
                
                <p><strong>自愿参与：</strong>您的参与完全自愿，您可以随时退出研究而不会受到任何不利影响。</p>
                
                <p><strong>风险与收益：</strong>本研究不会对您造成任何身体或心理风险。您的参与将有助于改善直播电商的用户体验。</p>
                
                <p><strong>联系方式：</strong>如果您对本研究有任何疑问，请联系研究负责人yqin457@connect.hkust-gz.edu.cn。</p>
            </div>
            
            <form id="consent-form">
                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" id="consent-agree" required>
                        <span class="checkmark"></span>
                        我已仔细阅读并理解上述内容，我自愿参与本研究
                    </label>
                </div>
                <button type="submit" class="submit-btn" disabled>同意并继续</button>
            </form>
        </div>
    </div>

    <!-- 开场问卷页面 -->
    <div id="intro-survey" class="intro-survey" style="display: none;">
        <div class="intro-content">
            <h2>您好，感谢参与本次研究</h2>
            <p class="intro-text">在开始浏览具体的直播间设计之前，我们想先简单了解一下您的基本情况与相关看法。以下信息仅用于学术研究分析，保证匿名和隐私安全，请根据您的真实情况作答。</p>

            <form id="intro-form">
                <!-- 基本信息：年龄与性别 -->
                <div class="question-group">
                    <label class="question-title">1. 您的年龄是？</label>
                    <input type="number" name="age" min="10" max="100" placeholder="请输入您的年龄" required style="width: 160px; padding: 6px;">
                </div>

                <div class="question-group">
                    <label class="question-title">2. 您的性别是？</label>
                    <div class="radio-group">
                        <label><input type="radio" name="gender" value="male" required> 男</label>
                        <label><input type="radio" name="gender" value="female" required> 女</label>
                    </div>
                </div>

                <!-- 问题3：收入水平 -->
                <div class="question-group">
                    <label class="question-title">3. 您目前的大致月收入范围是？</label>
                    <div class="radio-group">
                        <label><input type="radio" name="income_level" value="lt_3k" required> 3000元以下</label>
                        <label><input type="radio" name="income_level" value="3k_6k" required> 3000 - 6000元</label>
                        <label><input type="radio" name="income_level" value="6k_10k" required> 6000 - 10000元</label>
                        <label><input type="radio" name="income_level" value="10k_20k" required> 10000 - 20000元</label>
                        <label><input type="radio" name="income_level" value="gt_20k" required> 20000元以上</label>
                    </div>
                </div>

                <!-- 问题4：通过不同渠道获取优惠的意愿 -->
                <div class="question-group">
                    <label class="question-title">4. 总体而言，您通过不同渠道购买优惠券的意愿如何？</label>
                    <p class="scale-description">(1=不愿意, 4=一般, 7=非常愿意)</p>
                    <div class="likert-scale">
                        <label><input type="radio" name="coupon_willingness" value="1" required>1</label>
                        <label><input type="radio" name="coupon_willingness" value="2" required>2</label>
                        <label><input type="radio" name="coupon_willingness" value="3" required>3</label>
                        <label><input type="radio" name="coupon_willingness" value="4" required>4</label>
                        <label><input type="radio" name="coupon_willingness" value="5" required>5</label>
                        <label><input type="radio" name="coupon_willingness" value="6" required>6</label>
                        <label><input type="radio" name="coupon_willingness" value="7" required>7</label>
                    </div>
                </div>

                <!-- 问题5：通过直播进行消费购物的意愿 -->
                <div class="question-group">
                    <label class="question-title">5. 总体而言，您通过直播进行消费购物的意愿如何？</label>
                    <p class="scale-description">(1=不愿意, 4=一般, 7=非常愿意)</p>
                    <div class="likert-scale">
                        <label><input type="radio" name="livestream_intention" value="1" required>1</label>
                        <label><input type="radio" name="livestream_intention" value="2" required>2</label>
                        <label><input type="radio" name="livestream_intention" value="3" required>3</label>
                        <label><input type="radio" name="livestream_intention" value="4" required>4</label>
                        <label><input type="radio" name="livestream_intention" value="5" required>5</label>
                        <label><input type="radio" name="livestream_intention" value="6" required>6</label>
                        <label><input type="radio" name="livestream_intention" value="7" required>7</label>
                    </div>
                </div>

                <!-- 问题6：对麦当劳品牌相关消费的意愿 -->
                <div class="question-group">
                    <label class="question-title">6. 总体而言，您对“麦当劳”这个品牌相关消费的意愿如何？</label>
                    <p class="scale-description">(1=不愿意, 4=一般, 7=非常愿意)</p>
                    <div class="likert-scale">
                        <label><input type="radio" name="brand_intention" value="1" required>1</label>
                        <label><input type="radio" name="brand_intention" value="2" required>2</label>
                        <label><input type="radio" name="brand_intention" value="3" required>3</label>
                        <label><input type="radio" name="brand_intention" value="4" required>4</label>
                        <label><input type="radio" name="brand_intention" value="5" required>5</label>
                        <label><input type="radio" name="brand_intention" value="6" required>6</label>
                        <label><input type="radio" name="brand_intention" value="7" required>7</label>
                    </div>
                </div>

                <!-- 问题7：联系方式（可选） -->
                <div class="question-group">
                    <label class="question-title">7. 您的联系方式是(微信/小红书号/手机号)? (后续有极小可能进行回访/补充数据)</label>
                    <input type="text" name="contact_info" placeholder="请输入您的微信/小红书号/手机号" required style="width: 260px; padding: 6px;">
                </div>

                <button type="submit" class="submit-btn">开始实验</button>
            </form>
        </div>
    </div>

    <!-- 原有内容（设置为初始隐藏） -->
    <h1 id="progress-indicator" style="display: none;">第 1 / 8 组</h1>
    <div id="main-content" class="main-container" style="display: none;">
        <!-- 左侧直播界面 -->
        <div id="livestream-container" class="livestream-container">
            <!-- 直播间背景图片 -->
            <div class="livestream-background">
                <!-- 动态生成的组件将在这里插入 -->
            </div>
        </div>

        <!-- 右侧问卷 -->
        <div id="survey-container" class="survey-container">
            <h2>左侧界面为麦当劳直播间，界面由一些小组件构成(如优惠券，信息框，商品列表按钮等)。请对左侧界面进行评价：</h2>
            <form id="survey-form">
                <!-- 问题1：行为结果 -->
                <div class="question-group">
                    <label class="question-title">1. 看到这个界面，你最想做的第一个操作是什么？(单选)</label>
                    <div class="radio-group">
                        <label><input type="radio" name="behavior_outcome" value="accept_offers" required> 接受优惠 - 点击各类优惠、福袋、红包等 ("入会领" "立刻关注")</label>
                        <label><input type="radio" name="behavior_outcome" value="convert" required> 直接购买 - 点击"入会抢"，直接加入购物车，或立即购买等按钮</label>
                        <label><input type="radio" name="behavior_outcome" value="explore" required> 浏览商品 - 滑动商品列表或点进某个商品看细节</label>
                        <label><input type="radio" name="behavior_outcome" value="verify" required> 验证信息 - 查找更多信息来判断，比如查看用户评论、买家秀或商品详情</label>
                        <label><input type="radio" name="behavior_outcome" value="ask" required> 寻求帮助 - 在评论区打字向主播提问，让他解答我的疑惑</label>
                        <label><input type="radio" name="behavior_outcome" value="avoid" required> 忽略 - 主动忽略弹窗等营销信息</label>
                    </div>
                </div>

                <!-- 问题2：归因评价 -->
                <div class="question-group">
                    <label class="question-title">2. 请根据该界面给您的整体感受，评价您对以下说法的同意程度。(1=完全不同意, 7=完全同意)</label>

                    <!-- 语义线索的影响 -->
                    <div class="likert-scale-group">
                        <p class="sub-question">界面上的文字或数字信息（如"库存仅剩1件"、“倒计时”、"直播专享低价/限时价"、“xx正在下单”、“xx关注了主播”、“入会领券”）对我做决定的影响很大。</p>
                        <div class="likert-scale">
                            <label data-value="1"><input type="radio" name="semantic_cues" value="1" required></label>
                            <label data-value="2"><input type="radio" name="semantic_cues" value="2" required></label>
                            <label data-value="3"><input type="radio" name="semantic_cues" value="3" required></label>
                            <label data-value="4"><input type="radio" name="semantic_cues" value="4" required></label>
                            <label data-value="5"><input type="radio" name="semantic_cues" value="5" required></label>
                            <label data-value="6"><input type="radio" name="semantic_cues" value="6" required></label>
                            <label data-value="7"><input type="radio" name="semantic_cues" value="7" required></label>
                        </div>
                    </div>

                    <!-- 视觉大小线索的影响 -->
                    <div class="likert-scale-group">
                        <p class="sub-question">元素的视觉大小/尺寸，颜色（如一个很大的"抢购"按钮）对我做决定的影响很大。</p>
                        <div class="likert-scale">
                            <label><input type="radio" name="visual_cues_size" value="1" required>1</label>
                            <label><input type="radio" name="visual_cues_size" value="2" required>2</label>
                            <label><input type="radio" name="visual_cues_size" value="3" required>3</label>
                            <label><input type="radio" name="visual_cues_size" value="4" required>4</label>
                            <label><input type="radio" name="visual_cues_size" value="5" required>5</label>
                            <label><input type="radio" name="visual_cues_size" value="6" required>6</label>
                            <label><input type="radio" name="visual_cues_size" value="7" required>7</label>
                        </div>
                    </div>

                    <!-- 视觉位置线索的影响 -->
                    <div class="likert-scale-group">
                        <p class="sub-question">元素的位置（如一个正好在手边的弹窗）对我做决定的影响很大。</p>
                        <div class="likert-scale">
                            <label><input type="radio" name="visual_cues_position" value="1" required>1</label>
                            <label><input type="radio" name="visual_cues_position" value="2" required>2</label>
                            <label><input type="radio" name="visual_cues_position" value="3" required>3</label>
                            <label><input type="radio" name="visual_cues_position" value="4" required>4</label>
                            <label><input type="radio" name="visual_cues_position" value="5" required>5</label>
                            <label><input type="radio" name="visual_cues_position" value="6" required>6</label>
                            <label><input type="radio" name="visual_cues_position" value="7" required>7</label>
                        </div>
                    </div>
                </div>

                <!-- 提交按钮 - 移到这里 -->
                <div class="question-group">
                    <button type="submit" class="submit-btn">提交评价</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 感谢页面 -->
    <div id="thank-you-page" class="thank-you-page" style="display: none;">
        <div class="thank-you-content">
            <h2>🎉 实验完成！</h2>
            <p>感谢您参与本次HCI研究实验！</p>
            <p>您已经完成了所有20个试次的测试。</p>
            <p>您的数据已被记录</p>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDQ7ERXsX8XGUxzqUKUIWC5owmFywyVVa4",
            authDomain: "dp-demo-bd205.firebaseapp.com",
            projectId: "dp-demo-bd205",
            storageBucket: "dp-demo-bd205.firebasestorage.app",
            messagingSenderId: "217774153212",
            appId: "1:217774153212:web:f8bef1d87f4884607d2679",
            measurementId: "G-0J83G73TRP"
        };
        // 初始化 Firebase
        firebase.initializeApp(firebaseConfig);
        // 移动端网络环境兼容：启用长轮询避免某些浏览器阻断 websockets
        if (firebase && firebase.firestore) {
            try {
                // v9+ 常见；有些 v8 环境也可用
                firebase.firestore().settings({ experimentalAutoDetectLongPolling: true });
            } catch (e1) {
                try {
                    // v8 兼容
                    firebase.firestore().settings({ experimentalForceLongPolling: true });
                } catch (e2) {
                    console.warn('Firestore 长轮询设置失败（可忽略）：', e1, e2);
                }
            }
        }
    </script>


    <script src="script.js"></script>
</body>

</html>